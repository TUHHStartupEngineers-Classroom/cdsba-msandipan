{
  "hash": "aa81e23fd8c54e08bfd36aa711022617",
  "result": {
    "markdown": "---\ntitle: \"Randomized Controlled Trials\"\n---\n\n\n::: callout-note\nYou can delete everything in here and start fresh.\n:::\n\n-   Check whether the covariates are balanced across the groups. Use a plot to show it.\n\nThe covariates are the mobile device users and previous visits of users.\n\n\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-2_d72f36428754951128f7446d54e10489'}\n\n```{.r .cell-code}\ndf <- readRDS(\"~/GitHub/cdsba-msandipan/Causal_Data_Science_Data/abtest_online.rds\")\n\ncompare_visits <-  \n    ggplot(df, \n           aes(x = chatbot, \n               y = previous_visit, \n               )) +\n    stat_summary(geom = \"errorbar\", \n                 width = .5,\n                 fun.data = \"mean_se\", \n                 fun.args = list(mult=1.96),\n                 show.legend = F)\n  \ndf$mobile_device_int<-as.integer(as.logical(df$mobile_device))\n\ncompare_devices <-  \n    ggplot(df, \n           aes(x = chatbot, \n               y = mobile_device_int, \n               )) +\n    stat_summary(geom = \"errorbar\", \n                 width = .5,\n                 fun.data = \"mean_se\", \n                 fun.args = list(mult=1.96),\n                 show.legend = F)\n  \ncompare_visits\n```\n\n::: {.cell-output-display}\n![](06_rct_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\ncompare_devices\n```\n\n::: {.cell-output-display}\n![](06_rct_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n:::\n\n\n-   Run a regression to find the effect of chatbot on sales. Both Purchase and Purchase amount show a negative correlation with the usage of chatbots\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-3_79c342f717a7f932bc0671261dc95dc0'}\n\n```{.r .cell-code}\nlm_purchase <- lm(purchase ~ chatbot, data = df)\nlm_purchase_amt <- lm(purchase_amount ~ chatbot, data = df)\n\nsummary(lm_purchase)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase ~ chatbot, data = df)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -0.4960 -0.3249 -0.2679  0.5040  0.7321 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  0.49597    0.02122  23.376  < 2e-16 ***\n#> chatbotTRUE -0.22811    0.02989  -7.633 5.36e-14 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 0.4725 on 998 degrees of freedom\n#> Multiple R-squared:  0.05516,\tAdjusted R-squared:  0.05421 \n#> F-statistic: 58.26 on 1 and 998 DF,  p-value: 5.36e-14\n```\n:::\n\n```{.r .cell-code}\nsummary(lm_purchase_amt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_amount ~ chatbot, data = df)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -16.702 -14.478  -9.626  13.922  64.648 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  16.7017     0.8374  19.944  < 2e-16 ***\n#> chatbotTRUE  -7.0756     1.1796  -5.998 2.79e-09 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 18.65 on 998 degrees of freedom\n#> Multiple R-squared:  0.0348,\tAdjusted R-squared:  0.03383 \n#> F-statistic: 35.98 on 1 and 998 DF,  p-value: 2.787e-09\n```\n:::\n:::\n\n\n-   Find subgroup-specific effects by including an interaction. Compute a CATE for one exemplary group. A subgroup could be for example mobile users.\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-4_0b01ceb0d30c135a795fb8732770ac3e'}\n\n```{.r .cell-code}\nlm_mobile <- lm(purchase_amount ~ chatbot*mobile_device, data = df)\nsummary(lm_mobile)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_amount ~ chatbot * mobile_device, data = df)\n#> \n#> Residuals:\n#>    Min     1Q Median     3Q    Max \n#> -16.98 -14.54  -9.95  14.13  65.24 \n#> \n#> Coefficients:\n#>                               Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)                    16.9797     1.0152  16.725   <2e-16 ***\n#> chatbotTRUE                    -7.0301     1.4284  -4.922    1e-06 ***\n#> mobile_deviceTRUE              -0.8727     1.7987  -0.485    0.628    \n#> chatbotTRUE:mobile_deviceTRUE  -0.1526     2.5369  -0.060    0.952    \n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 18.66 on 996 degrees of freedom\n#> Multiple R-squared:  0.03534,\tAdjusted R-squared:  0.03244 \n#> F-statistic: 12.16 on 3 and 996 DF,  p-value: 8.034e-08\n```\n:::\n:::\n\n\n-   It's not only of interest how much customers buy but also if the buy at all. Then, the dependent variable is binary (either 0 or 1) instead of continuous and the model of choice is the logistic regression. Use the outcome variable purchase and run a logistic regression. The coefficients are not as easily interpretable as before. Look it up and interpret the coefficient for chatbot.\n\nDue to usage of Chatbot being a categorial variable, the coefficient of Chatbot False is 0.49597 and the coefficient for Chatbot True is 0.26786.\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-5_7b6d16bb451ea7e5f9cd7a9e881a5843'}\n\n```{.r .cell-code}\nlm_purchase <- lm(purchase ~ chatbot, data = df)\nsummary(lm_purchase)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase ~ chatbot, data = df)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -0.4960 -0.3249 -0.2679  0.5040  0.7321 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  0.49597    0.02122  23.376  < 2e-16 ***\n#> chatbotTRUE -0.22811    0.02989  -7.633 5.36e-14 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 0.4725 on 998 degrees of freedom\n#> Multiple R-squared:  0.05516,\tAdjusted R-squared:  0.05421 \n#> F-statistic: 58.26 on 1 and 998 DF,  p-value: 5.36e-14\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}